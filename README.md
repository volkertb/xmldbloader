# What is this?

This is a small command-line tool that can be used easily and quickly load XML DataSet files (as generated by DbUnit) into any database that has available JDBC drivers.

# Why would this be useful?

While I was building a Docker image based on the PostgreSQL base images at https://hub.docker.com/_/postgres/, I found that I needed a way to to load master data from DBUnit DataSet XML files into the database during database initialization.

It turns out that these DataSet files are apparently native to DBUnit and not exactly universally supported by other database tools. I couldn't find an easy way to do load these datasets into a database inside a Dockerfile without having to install a Maven toolchain inside it and setting up a POM that would have done it through the dbunit-maven-plugin or something tedious and hacky like that.

Instead, I wanted a convenient and (mostly) self-contained command-line tool that could directly load these data sets into a database of choice. I decided to develop one in my spare time, making it DBMS-neutral by enabling it to load a supplied JDBC driver (from an external JAR file) at run-time. The provided JUnit test uses SQLite, but I've also successfully tested it with PostgreSQL. Whatever DBMS you decide to use this with, be sure to provide a JDBC driver that is compatible with the JVM version on which you will be running the tool! For instance, a JDBC 4.2 driver, which requires Java 8, will of course fail to work if the tool is still being run in a Java 6 or 7 JVM.

Although running the tool on an up-to-date (Java 8) JVM is recommended (and doing so would provide maximum compatibility with JDBC drivers both old and new), I did invest time in ensuring that the the tool would continue to compile and run with Java versions 6 and up, at least for the time being. At a certain point however, the burden of maintaining downward compatibility with older Java versions will cease to be worthwhile, so I won't guarantee that the code will remain compatible with Java 6 (or even 7) in the future.

Hopefully, this tool and/or its source code will prove useful to others as well. Pull requests, feedback, bug reports, feature requests and other forms of contribution are of course always welcome. And since it's open source, you are also free to fork it and modify it for your own nefarious purposes, as long as you respect the license terms. â˜º

# How to build

## Prerequisites

* Java 6 or higher
* Maven 3.x

## Build command

    mvn clean install

# How to use

## Running the tool

After having built the tool with Maven (see above), run the following commands to run the tool on an example SQLite database:

    cd target
    java -jar xmldbloader.jar chinook-dataset.xml

Note that this import feature will take a few minutes to complete. Once completed, the SQLite database file chinook_empty.db should contain the data from chinook-dataset.xml.

You need to pass at least one XML file path or directory (containing at least one XML file) as an argument to the main method for the tool to do its work.

## Configuring the tool for your own use case

To run the tool on your own database, you first need to modify the supplied xmldbloader.properties file. This file must remain in the same directory as from which you are going to launch the tool. Example of a valid properties file, assuming a PostgreSQL database:

    allowEmptyFields = true
    # IMPORTANT: make sure the JAR file you specify contains a JDBC driver which is compatible with your Java version.
    jdbc.jarpath = /usr/local/lib/postgresql-9.4.1211.jre6.jar
    # The prefix "jdbc:" is implicit and can be either included or omitted.
    jdbc.url = jdbc:postgresql://localhost/postgres
    jdbc.username = postgres
    jdbc.password = postgres
